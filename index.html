<html>
<head>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.js' type='text/javascript'></script>

<link href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.2/css/bootstrap.css' rel='stylesheet' />
<script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.2/js/bootstrap.js' type='text/javascript'></script>

<link href='https://cdnjs.cloudflare.com/ajax/libs/formvalidation/0.6.1/css/formValidation.css' rel='stylesheet' />
<script src='https://cdnjs.cloudflare.com/ajax/libs/formvalidation/0.6.1/js/formValidation.js' type='text/javascript'></script>

<link href='https://cdnjs.cloudflare.com/ajax/libs/formvalidation/0.6.1/css/formValidation.css' rel='stylesheet' />
<script src='https://cdnjs.cloudflare.com/ajax/libs/formvalidation/0.6.1/js/framework/bootstrap.js' type='text/javascript'></script>

<link href='https://cdnjs.cloudflare.com/ajax/libs/iCheck/1.0.2/skins/all.css' rel='stylesheet' />
<script src='https://cdnjs.cloudflare.com/ajax/libs/iCheck/1.0.2/icheck.js' type='text/javascript'></script>
</head>

<body>
  <input type='text' id='set-max-choices' value='1' />
  <form id="interviewForm" class="form-horizontal">
      <div class="form-group">
          <label class="col-xs-3 control-label">Programming Languages</label>
          <div class="col-xs-6">
              <div class="checkbox">
                  <label>
                      <input type="checkbox" name="languages[]" value="net" /> .Net
                  </label>
              </div>
              <div class="checkbox">
                  <label>
                      <input type="checkbox" name="languages[]" value="java" /> Java
                  </label>
              </div>
              <div class="checkbox">
                  <label>
                      <input type="checkbox" name="languages[]" value="c" /> C/C++
                  </label>
              </div>
              <div class="checkbox">
                  <label>
                      <input type="checkbox" name="languages[]" value="php" /> PHP
                  </label>
              </div>
              <div class="checkbox">
                  <label>
                      <input type="checkbox" name="languages[]" value="perl" /> Perl
                  </label>
              </div>
              <div class="checkbox">
                  <label>
                      <input type="checkbox" name="languages[]" value="ruby" /> Ruby
                  </label>
              </div>
              <div class="checkbox">
                  <label>
                      <input type="checkbox" name="languages[]" value="python" /> Python
                  </label>
              </div>
              <div class="checkbox">
                  <label>
                      <input type="checkbox" name="languages[]" value="javascript" /> Javascript
                  </label>
              </div>
          </div>
      </div>

  </form>

  <script>
  $(document).ready(function() {
    window.maximum_choices = 1;
    var _initValidationForm = function() {
      $('#interviewForm').formValidation({
          framework: 'bootstrap',
          feedbackIcons: {
              valid: 'glyphicon glyphicon-ok',
              invalid: 'glyphicon glyphicon-remove',
              validating: 'glyphicon glyphicon-refresh'
          },
          fields: {
              'languages[]': {
                  validators: {
                      choice: {
                          min: 1,
                          max: window.maximum_choices,
                          message: 'Please choose 1 - ' + window.maximum_choices + ' programming languages you are good at'
                      }
                  }
              }
          }
      });
    };

    _initValidationForm();

    $('input:checkbox').iCheck({
      checkboxClass: 'icheckbox_flat-blue',
      radioClass: 'iradio_flat-blue'
    }).on('ifChanged', function(e) {
      var field = $(this).attr('name');
      _initValidationForm();
      // $('#interviewForm').formValidation('revalidateField', field);
    });

    $('#set-max-choices').on('change', function() {
      window.maximum_choices = parseInt($('#set-max-choices').val(), 10);
      _initValidationForm();
    })
  });
  </script>
</body>
</html>
